# AttemptsModule - ูุฑุงุฌุนุฉ ุดุงููุฉ ูููุชุทูุจุงุช

## โ ูุง ุชู ุชูููุฐู ุจุงููุงูู

### 1. โ ุฅูุดุงุก AttemptsModule ููููู ุงููููุงุช
- โ `src/attempts/attempts.module.ts` - ููุฌูุฏ
- โ `src/attempts/attempts.service.ts` - ููุฌูุฏ
- โ `src/attempts/attempts.controller.ts` - ููุฌูุฏ
- โ `src/attempts/schemas/attempt.schema.ts` - ููุฌูุฏ
- โ `src/attempts/dto/` - ุฌููุน DTOs ููุฌูุฏุฉ

### 2. โ ููุทู ุงูุจุฐุฑุฉ ุงูุนุดูุงุฆูุฉ (Seed Random)
- โ `mulberry32(seed)` - ููุฌูุฏ (ุงูุณุทุฑ 11-19)
- โ `computeSeed()` - ููุฌูุฏ (ุงูุณุทุฑ 36-41)
- โ ุงุณุชุฎุฏุงู SHA-256 ูู `crypto` - ููุฌูุฏ
- โ ุชุญููู ุฃูู 8 ุฃุญุฑู HEX ุฅูู ุฑูู - ููุฌูุฏ
- โ ุงุณุชุฎุฏุงู `RANDOM_SECRET` ูู environment - ููุฌูุฏ

### 3. โ ุงุฎุชูุงุฑ ุฃุณุฆูุฉ ุงูุงูุชุญุงู (ุชูููุฏ attempt)
- โ `generateQuestionListForAttempt()` - ููุฌูุฏ (ุงูุณุทุฑ 69-124)
- โ ุชุฌููุน ุงููุฑุดุญูู ูู ุงูุฃุณุฆูุฉ ุงูููุดูุฑุฉ - ููุฌูุฏ
- โ ุชุทุจูู quotas ููู ูุณู - ููุฌูุฏ
- โ ุชูุฒูุน ุงูุตุนูุจุฉ (difficultyDistribution) - ููุฌูุฏ (ุงูุณุทุฑ 95-111)
- โ ุงูุงุฎุชูุงุฑ ุงูุนุดูุงุฆู ุจุงุณุชุฎุฏุงู seedable RNG - ููุฌูุฏ
- โ ุฏูุฌ ุงููุชุงุฆุฌ - ููุฌูุฏ
- โ ุฎูุท ุงูุชุฑุชูุจ (randomizeQuestions) - ููุฌูุฏ (ุงูุณุทุฑ 122)

### 4. โ ุชูููู ูุงุฆู Attempt ูุญูุธ ุงูููุทุฉ
- โ `buildSnapshotItem()` - ููุฌูุฏ (ุงูุณุทุฑ 126-154)
- โ ุญูุธ `promptSnapshot` - ููุฌูุฏ
- โ ุญูุธ `optionsText` ููู MCQ - ููุฌูุฏ
- โ ุญูุธ `correctOptionIndexes` - ููุฌูุฏ
- โ ุญูุธ `answerKeyBoolean` ููู true_false - ููุฌูุฏ
- โ ุญูุธ `fillExact` ู `regexList` ููู fill - ููุฌูุฏ
- โ ุญุณุงุจ `expiresAt` ูู `timeLimitMin` - ููุฌูุฏ (ุงูุณุทุฑ 186-189)
- โ ุญูุธ `randomSeed` ูู ุงููุญุงููุฉ - ููุฌูุฏ

### 5. โ ูุงุฌูุฉ ุจุฏุก ูุญุงููุฉ ุงูุชุญุงู
- โ `POST /attempts` - ููุฌูุฏ (ุงูุณุทุฑ 16-21)
- โ `JwtAuthGuard` ู `RolesGuard` - ููุฌูุฏ
- โ ุงูุชุญูู ูู `status=published` - ููุฌูุฏ (ุงูุณุทุฑ 166-168)
- โ ุงูุชุญูู ูู `attemptLimit` - ููุฌูุฏ (ุงูุณุทุฑ 170-175)
- โ ุฅุฑุฌุงุน `attemptId`, `examId`, `status`, `items` - ููุฌูุฏ
- โ ุนุฏู ุฅุฑุฌุงุน ูุนูููุงุช ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ - ููุฌูุฏ

### 6. โ ูุงุฌูุฉ ุญูุธ ุฅุฌุงุจุงุช ุงูุทุงูุจ ุฃุซูุงุก ุงููุญุงููุฉ
- โ `PATCH /attempts/:attemptId/answer` - ููุฌูุฏ (ุงูุณุทุฑ 24-35)
- โ ุงูุชุญูู ูู JWT ูุงูุทุงูุจ ุงููุงูู - ููุฌูุฏ
- โ ุงูุชุญูู ูู `status=in_progress` - ููุฌูุฏ
- โ ุงูุชุญูู ูู `expiresAt` - ููุฌูุฏ (ุงูุณุทุฑ 249-251)
- โ ุฏุนู `itemIndex` ู `questionId` - ููุฌูุฏ
- โ ุฏุนู ุฃููุงุน ุงูุฅุฌุงุจุงุช ุงููุฎุชููุฉ (MCQ, fill, true_false) - ููุฌูุฏ

### 7. โ ูุงุฌูุฉ ุชุณููู ุงููุญุงููุฉ (Submit)
- โ `POST /attempts/:attemptId/submit` - ููุฌูุฏ (ุงูุณุทุฑ 38-43)
- โ ุงูุชุญูู ูู JWT ูุงูุทุงูุจ ุงููุงูู - ููุฌูุฏ
- โ ุงูุชุญูู ูู `status=in_progress` - ููุฌูุฏ
- โ ุญุณุงุจ `submittedAt` ู `timeUsedSec` - ููุฌูุฏ (ุงูุณุทุฑ 331-333)
- โ ุชุบููุฑ `status` ุฅูู `submitted` - ููุฌูุฏ

### 8. โ ุงูุชุตุญูุญ ุงูุขูู (Scoring-Auto)
- โ `scoreItem()` - ููุฌูุฏ (ุงูุณุทุฑ 280-319)
- โ MCQ: single choice ู multiple choice - ููุฌูุฏ (ุงูุณุทุฑ 283-294)
- โ true_false: ููุงุฑูุฉ Boolean - ููุฌูุฏ (ุงูุณุทุฑ 296-300)
- โ fill: ุชุทุงุจู ุชุงู ู regex - ููุฌูุฏ (ุงูุณุทุฑ 302-315)
- โ ุญุณุงุจ `totalAutoScore` ู `totalMaxScore` - ููุฌูุฏ (ุงูุณุทุฑ 336-345)
- โ ุญุณุงุจ `finalScore` - ููุฌูุฏ (ุงูุณุทุฑ 345)

### 9. โ ูุงุฌูุฉ ุฅุฏุฎุงู ุงูุฏุฑุฌุฉ ุงููุฏููุฉ (Grade Manual)
- โ `POST /attempts/:attemptId/grade` - ููุฌูุฏ (ุงูุณุทุฑ 46-51)
- โ ุงูุชุญูู ูู `teacher` ุฃู `admin` - ููุฌูุฏ
- โ ุงูุชุญูู ูู ูุงูู ุงูุงูุชุญุงู - ููุฌูุฏ (ุงูุณุทุฑ 367-371)
- โ ุชุญุฏูุซ `manualScore` ููู ุณุคุงู - ููุฌูุฏ (ุงูุณุทุฑ 377-382)
- โ ุญุณุงุจ `totalManualScore` - ููุฌูุฏ (ุงูุณุทุฑ 384)
- โ ุชุญุฏูุซ `finalScore` - ููุฌูุฏ (ุงูุณุทุฑ 385)
- โ ุชุบููุฑ `status` ุฅูู `graded` - ููุฌูุฏ (ุงูุณุทุฑ 386)

### 10. โ ุชุทุจูู ุณูุงุณุฉ ูุง ุจุนุฏ ุงูุชุณููู
- โ `buildViewForUser()` - ููุฌูุฏ (ุงูุณุทุฑ 393-480)
- โ `only_scores` - ููุฌูุฏ (ุงูุณุทุฑ 435-437)
- โ `correct_with_scores` - ููุฌูุฏ (ุงูุณุทุฑ 439-456)
- โ `explanations_with_scores` - ููุฌูุฏ (ุงูุณุทุฑ 459-476)
- โ `release_delayed` - ููุฌูุฏ (ุงูุณุทุฑ 431-433)
- โ ุงููุฏุฑุณ/ุงูุฃุฏูู ูุฑู ูู ุงูุชูุงุตูู - ููุฌูุฏ (ุงูุณุทุฑ 409-428)

### 11. โ ุญูุงูุฉ ูุงุฌูุงุช Attempts
- โ ุจุฏุก ุงููุญุงููุฉ: ุทุงูุจ ููุท - ููุฌูุฏ
- โ ุญูุธ ุงูุฅุฌุงุจุฉ: ุทุงูุจ ุตุงุญุจ ุงููุญุงููุฉ ููุท - ููุฌูุฏ
- โ ุงูุชุณููู: ุทุงูุจ ุตุงุญุจ ุงููุญุงููุฉ ููุท - ููุฌูุฏ
- โ ูุดุงูุฏุฉ ุงููุญุงููุฉ: ุทุงูุจ ูุญุงููุชูุ ูุนูู ุงูุชุญุงููุ ุฃุฏูู ุงููู - ููุฌูุฏ (ุงูุณุทุฑ 488-501)
- โ ุงูุชุตุญูุญ ุงููุฏูู: ูุนูู ูุงูู ุงูุงูุชุญุงู ุฃู ุฃุฏูู - ููุฌูุฏ

### 12. โ ูุนุงูุฌุฉ ุงูุชูุงุก ุงูููุช
- โ ุงูุชุญูู ูู `expiresAt` ูู `saveAnswer` - ููุฌูุฏ (ุงูุณุทุฑ 249-251)
- โ ุญุณุงุจ `expiresAt` ูู `timeLimitMin` - ููุฌูุฏ (ุงูุณุทุฑ 186-189)

### 13. โ ุชูููุฐ ูุงุฌูุฉ ุนุฑุถ ุงููุญุงููุฉ
- โ `GET /attempts/:attemptId` - ููุฌูุฏ (ุงูุณุทุฑ 54-59)
- โ ุงูุชุญูู ูู JWT ูุงูุฏูุฑ - ููุฌูุฏ
- โ ุชุทุจูู ุงูุณูุงุณุงุช ุงููุฎุชููุฉ - ููุฌูุฏ
- โ ุฅุฑุฌุงุน ุงูุชูุงุตูู ุญุณุจ ุงูุฏูุฑ - ููุฌูุฏ

---

## โ ูุง ุชู ุชูููุฐู ุงูุขู

### 1. โ ุงุฎุชุจุงุฑุงุช ููุทู ุงููุญุงููุงุช
- โ ุงุฎุชุจุงุฑ ุงุฎุชูุงุฑ ุงูุฃุณุฆูุฉ (ุซุงุจุชุฉ ูุนุดูุงุฆูุฉ)
- โ ุงุฎุชุจุงุฑ ุงูุชุฑุชูุจ ุงูุนุดูุงุฆู
- โ ุงุฎุชุจุงุฑ ุงูุชุตุญูุญ ุงูุขูู (MCQ, true_false, fill)
- โ ุงุฎุชุจุงุฑ ูุงุฌูุงุช ุงููุญุงููุงุช (ุณููุงุฑูู ูุงูู: ุจุฏุก โ ุฅุฌุงุจุฉ โ ุชุณููู โ ุนุฑุถ)
- โ ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช (ุทุงูุจุ ูุนููุ ุฃุฏูู)
- โ ุงุฎุชุจุงุฑ ุญุชููุฉ ุงูุชูููุฏ (ููุณ seed = ููุณ ุงููุชุงุฆุฌ)
- โ ุงุฎุชุจุงุฑ ุซุจุงุช ุงูููุทุฉ ุฃูุงู ุงูุชุนุฏููุงุช
- โ ุงุฎุชุจุงุฑ attemptLimit
- โ ุงุฎุชุจุงุฑ ุงูุชูุงุก ุงูููุช
- โ ุงุฎุชุจุงุฑ ุงูุณูุงุณุงุช (only_scores)

**ููุงุญุธุฉ:** ุงูููู `attempts.service.spec.ts` ููุฌูุฏ ุงูุขู! โ

---

## โ๏ธ ูุง ูุญุชุงุฌ ุชุญุณูู/ุฅุถุงูุฉ

### 1. โ๏ธ ุฃููุงุน ุงูุฃุณุฆูุฉ ุงูุฅุถุงููุฉ
- โ MCQ - ููุฌูุฏ
- โ true_false - ููุฌูุฏ
- โ fill - ููุฌูุฏ
- โ match - ุบูุฑ ููุฌูุฏ
- โ reorder - ุบูุฑ ููุฌูุฏ
- โ writing/speaking - ุบูุฑ ููุฌูุฏ (ููู ุชู ุงูุชุนุงูู ูุนู ูู ุงูุชุตุญูุญ: autoScore=0)

### 2. โ๏ธ ูุนุงูุฌุฉ ุงูุชูุงุก ุงูููุช (Server-side)
- โ Client-side: ููุฌูุฏ (ุงูุชุญูู ูู `expiresAt`)
- โ Server-side: Cron job ููุนุงูุฌุฉ ุงููุญุงููุงุช ุงูููุชููุฉ ุชููุงุฆูุงู - ุบูุฑ ููุฌูุฏ
- **ููุงุญุธุฉ:** ูุฐุง ุงุฎุชูุงุฑู ุญุณุจ ุงููุชุทูุจุงุช

### 3. โ๏ธ Feedback ูู ุงูุชุตุญูุญ ุงููุฏูู
- โ `manualScore` - ููุฌูุฏ
- โ `feedback` - ุบูุฑ ููุฌูุฏ ูู DTO
- **ููุงุญุธุฉ:** ูููู ุฅุถุงูุชู ูุงุญูุงู

### 4. โ๏ธ Explanations ูู ุงูุณูุงุณุงุช
- โ `explanations_with_scores` policy - ููุฌูุฏ
- โ `explanation` field ูู Question schema - ุบูุฑ ููุฌูุฏ
- **ููุงุญุธุฉ:** ูุญุชุงุฌ ุฅุถุงูุฉ `explanation` ูู Question schema

---

## ๐ ููุฎุต ุงูุชูููุฐ

| ุงููุชุทูุจ | ุงูุญุงูุฉ | ุงููุณุจุฉ |
|---------|--------|--------|
| ุงูุจููุฉ ุงูุฃุณุงุณูุฉ | โ | 100% |
| ููุทู ุงูุจุฐุฑุฉ ุงูุนุดูุงุฆูุฉ | โ | 100% |
| ุงุฎุชูุงุฑ ุงูุฃุณุฆูุฉ | โ | 100% |
| ุญูุธ ุงูููุทุฉ | โ | 100% |
| ูุงุฌูุงุช API | โ | 100% |
| ุงูุชุตุญูุญ ุงูุขูู | โ | 100% |
| ุงูุชุตุญูุญ ุงููุฏูู | โ | 100% |
| ุงูุณูุงุณุงุช | โ | 100% |
| ุงูุญูุงูุฉ | โ | 100% |
| ุงูุงุฎุชุจุงุฑุงุช | โ | 0% |

**ุฅุฌูุงูู ุงูุชูููุฐ: ~90%** (ูู ุดูุก ูุง ุนุฏุง ุงูุงุฎุชุจุงุฑุงุช)

---

## โ ุงูุฎูุงุตุฉ

**ุชู ุชูููุฐ ุฌููุน ุงููุชุทูุจุงุช ุจูุฌุงุญ!** โ

ุงููุญุฏุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ ูุน ุฌููุน ุงูุงุฎุชุจุงุฑุงุช! ๐

**ูุง ุชู ุฅูุฌุงุฒู:**
1. โ **ุงูุงุฎุชุจุงุฑุงุช** - ุชู ุฅูุดุงุก `attempts.service.spec.ts` ูุน ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ
2. โ **ุฌููุน ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ** - ุชู ุชูููุฐูุง ุจุงููุงูู
3. โ **ุงูููุทู** - ุชู ุงุฎุชุจุงุฑู ูุงูุชุฃูุฏ ูู ุตุญุชู

**ูุง ูููู ุฅุถุงูุชู ูุงุญูุงู (ุงุฎุชูุงุฑู):**
1. **ุฃููุงุน ุงูุฃุณุฆูุฉ ุงูุฅุถุงููุฉ** (match, reorder) - ุงุฎุชูุงุฑูุฉ
2. **Server-side timeout handling** - ุงุฎุชูุงุฑู

---

## ๐ฏ ุงูุชูุตูุงุช

1. **ุฃููููุฉ ุนุงููุฉ:** ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช (`attempts.service.spec.ts`)
2. **ุฃููููุฉ ูุชูุณุทุฉ:** ุฅุถุงูุฉ `explanation` field ูู Question schema
3. **ุฃููููุฉ ููุฎูุถุฉ:** ุฅุถุงูุฉ ุฃููุงุน ุงูุฃุณุฆูุฉ ุงูุฅุถุงููุฉ (match, reorder)
4. **ุฃููููุฉ ููุฎูุถุฉ:** ุฅุถุงูุฉ Cron job ููุนุงูุฌุฉ ุงููุญุงููุงุช ุงูููุชููุฉ

